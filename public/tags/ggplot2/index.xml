<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>ggplot2 on Not So Formal</title>
    <link>http://notsoformal.xyz/tags/ggplot2/</link>
    <description>Recent content in ggplot2 on Not So Formal</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Sun, 19 May 2019 00:00:00 +0000</lastBuildDate>
    
	<atom:link href="http://notsoformal.xyz/tags/ggplot2/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>RFM Model Timelapse</title>
      <link>http://notsoformal.xyz/2019-05-19-rfm-model-timelapse/</link>
      <pubDate>Sun, 19 May 2019 00:00:00 +0000</pubDate>
      
      <guid>http://notsoformal.xyz/2019-05-19-rfm-model-timelapse/</guid>
      <description>A simple exercise of plotting RFM (recency, frequency, monetary) model and using gganimate to add a cherry on top.
Dataset: Dr Daqing Chen, Director: Public Analytics group. chend ‘@’ lsbu.ac.uk, School of Engineering, London South Bank University, London SE1 0AA, UK.
httr::GET(&amp;quot;https://query.data.world/s/eibmlnrvn7hzil7adpfqceeity3im6&amp;quot;, write_disk(tf &amp;lt;- tempfile(fileext = &amp;quot;.xlsx&amp;quot;))) ## Response [https://download.data.world/file_download/uci/online-retail/Onlinex?auth=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwcm9kLXVzZXItY2xpZW50OnRtYXMtamMiLCJpc3MiOiJhZ2VudDp0bWFzLWpjOjoyZDJkOGFjYy0yMDAwLTQ0NWQtOWVlZS02YTZlNDQ5MzI4MzMiLCJpYXQiOjE1NTc5NzQ0NTksInJvbGUiOlsidXNlciIsInVzZXJfYXBpX2FkbWluIiwidXNlcl9hcGlfcmVhZCIsInVzZXJfYXBpX3dyaXRlIl0sImdlbmVyYWwtcHVycG9zZSI6ZmFsc2UsInVybCI6IjJlZWY3ZTEwMzllNmU5NjRiNTdlZDdhNTJiNzYyNmVkNzM0NjM4M2YifQ.TH1yJ7mMLNo8jDJs_EAiuwEh4JJlQELaMJ_aJVVEKgyYYdiy-h_N56sgGbm1p8y1BIBaI3iFNM7yFwiGLE9Qpg] ## Date: 2020-02-08 13:58 ## Status: 200 ## Content-Type: text/html ## Size: 23.7 MB ## &amp;lt;ON DISK&amp;gt; /var/folders/xj/wctktk112yz7y6skyk6z40jr0000gp/T//RtmpWPTUw0/file7a177c67c6e2.xlsx raw &amp;lt;- read_excel(tf) %&amp;gt;% clean_names() # select important features dat &amp;lt;- raw %&amp;gt;% select(customer_id, invoice_no, invoice_date, unit_price, quantity) %&amp;gt;% mutate(total_paid = unit_price * quantity, invoice_date = lubridate::as_date(invoice_date)) %&amp;gt;% rename(date = invoice_date, invoice = invoice_no) # count in recency, frequency, and monetary d &amp;lt;- max(dat$date) dat &amp;lt;- dat %&amp;gt;% group_by(customer_id) %&amp;gt;% summarise(rec = time_length(interval(d, max(date)), &amp;quot;days&amp;quot;), freq = n_distinct(invoice), monet = sum(total_paid)) %&amp;gt;% mutate(rec = abs(rec), monet = monet / freq) %&amp;gt;% # only keep positive amount filter(monet &amp;gt;= 0) # EDA ------------------------------------------------------------ dat %&amp;gt;% gather(var, val, -customer_id) %&amp;gt;% group_by(var) %&amp;gt;% # remove outliers filter(val &amp;lt;= quantile(val, 0.</description>
    </item>
    
    <item>
      <title>Bar, Bended Bar, and Treemap</title>
      <link>http://notsoformal.xyz/2018-01-21-visualise-count-observations/</link>
      <pubDate>Sun, 21 Jan 2018 00:00:00 +0000</pubDate>
      
      <guid>http://notsoformal.xyz/2018-01-21-visualise-count-observations/</guid>
      <description>In this exercise, we will visualize Standard &amp;amp; Poor’s 500 Index industry composition.
Gettting sp500_sectora We will scrap the sp500_sectora from Wikipedia page, with rvest.
library(dplyr) library(rvest) url &amp;lt;- &amp;quot;https://en.wikipedia.org/wiki/List_of_S%26P_500_companies&amp;quot; sp500 &amp;lt;- url %&amp;gt;% read_html() %&amp;gt;% # How do I select css? html_node(css = &amp;quot;table.wikitable&amp;quot;) %&amp;gt;% html_table() %&amp;gt;% mutate(sector = factor(`GICS Sector`)) %&amp;gt;% as_tibble() sp500 ## # A tibble: 505 x 10 ## Symbol Security `SEC filings` `GICS Sector` `GICS Sub Indus… `Headquarters L… ## &amp;lt;chr&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;chr&amp;gt; ## 1 MMM 3M Comp… reports Industrials Industrial Cong… St.</description>
    </item>
    
  </channel>
</rss>